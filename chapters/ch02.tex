\chapter{Limits and Colimits}

\section{Diagrams and Their Shapes}

\bx
Determine the shape of the diagram\footnote{In the sense of Section 1.1.}
\bse
\begin{tikzcd}[row sep=large,column sep=large]
A \ar[r]\ar[dr] & B\ar[d]\\
& C
\end{tikzcd}
\ese
if the diagram is
\ben[label=(\alph*)]
\item \textbf{guaranteed} to be commutative;
\item \textbf{not necessarily} noncommutative.
\een 
\ex

\bs
\ben[label=(\alph*)]
\item  
\item 
\een
\es

\bx
Let $G$ be a group, and consider it as a category with one object, as in Exercise 1.3. Interpret `diagram with shape $G$' in the following categories.
\ben[label=(\alph*)]
\item  The category of sets and maps.
\item The category of groups and homomorphisms.
\item The category of topological spaces and continuous maps.
\een
\ex

\bs
\ben[label=(\alph*)]
\item  
\item
\item 
\een
\es

\bx
Consider the group $G = \Z/2$ as a category with one object and two morphisms. Is $G$ a finite shape category?
\ex

\bs
\es

\bx
\ben[label=(\alph*)]
\item Let $\mathcal{I}$ be a small category and let $F,G \in \mathcal{C}^{\mathcal{I}}$. Express the collection of all natural transformations from $F$ to $G$ as a subset of some set. It follows that this collection is a set.
\item Conclude that if $\mathcal{I}$ is small, then $\mathcal{C}^{\mathcal{I}}$ is actually a category.
\item Find an example of a `large' category $\mathcal{I}$ and $F,G \in \mathcal{C}^{\mathcal{I}}$ so that the collection of natural transformations $F \to G$ is not a set.
\een
\ex

\bs
\ben[label=(\alph*)]
\item 
\item 
\item 
\een
\es

\section{Limits and Colimits}

\bx
Let $\mathcal{U}$ be the category whose objects are objects $Q \in \mathcal{C}$ together with maps $Q \to X$ and $Q \to Z$ making the diagram 
\bse
\begin{tikzcd}%[row sep=large,column sep=large]
Q \ar[rrrd,bend left=30] \ar[dddr,bend right=30] &&&\\
&&& X \ar[dd]\\
&&&\\
&Z\ar[rr] && Y
\end{tikzcd}
\ese
commute; the morphisms are maps $f \cl Q \to R$ such that the diagram
\bse
\begin{tikzcd}[row sep=large,column sep=huge]
X \ar[d,equal] & \ar[l]\ar[r] Q\ar[d,"f"] & Z\ar[d,equal] \\
X \ar[dr,bend right=20]&\ar[l]\ar[r] R & Z\ar[dl,bend left=20]\\
& Y &
\end{tikzcd}
\ese
commutes. Show that $P$ (with the maps to $X$ and $Z$) is a limit for the diagram $X \to Y \leftarrow Z$ if, and only if, it is a terminal object in $\mathcal{U}$.
\ex

\bs
\es

\bx
Consider the diagram category $\mathcal{I}$ with two objects $\bullet$ and $\star$, with only identity morphisms. Let $\mathcal{C}$ denote the category of real vector spaces and linear transformations, and let $F(\bullet) = 0$ and $F(\star) = \R$.
\ben[label=(\alph*)]
\item Show that the limit of $F \cl\mathcal{I} \to \mathcal{C}$ is $\R$; what is the natural transformation $\Delta_{\R} \to F$?
\item Let $V$ be any nontrivial vector space. Show that there are uncountably many natural transformations $T \cl \Delta_V \to \Delta_{\R}$ making the diagram
\bse
\begin{tikzcd}[row sep=large,column sep=huge]
& \Delta_{\R}\ar[d]\\
\Delta_V \ar[ur,dashed,bend left=10,"T"]\ar[r] & F
\end{tikzcd}
\ese
commutative.
\item Show that exactly one of these is of the form $\Delta_f$ for some linear transformation $f \cl V \to \R$.
\een
\ex

\bs
\ben[label=(\alph*)]
\item 
\item 
\item 
\een
\es

\bp
Let $P$ be a limit for the diagram $F \cl\mathcal{I} \to \mathcal{C}$ (so we are given a natural transformation $L \cl \Delta_P \to F$). Show that there is an isomorphism
\bse
\mor_{\mathcal{C}}(Q, P)\xrightarrow{\ \cong \ }\mor_{\mathcal{C}^{\mathcal{I}}}(\Delta_Q, F).
\ese
\ep

\bs
\es

\bx
Suppose that the empty diagram $\vn$ has a limit. Show that it is a terminal object in $\mathcal{C}$. Find a way to view a product as the limit of a diagram.
\ex

\bs
\es

\bx
\ben[label=(\alph*)]
\item Construct an example of a category and a diagram which has no limit.
\item A \textbf{discrete category} is one in which the only morphisms are identities. What is the limit of a diagram whose shape is discrete?
\een
\ex

\bs
\ben[label=(\alph*)]
\item  
\item 
\een
\es

\bp
Show that any two limits of a given diagram $F \cl \mathcal{I} \to \mathcal{C}$ are equivalent in $\mathcal{C}$. Also prove the dual statement about the uniqueness of colimits.

{\scshape Hint.} Let $P$ and $Q$ be two limits of $F$; use the universal property of the limit to find maps $P \to Q$ and $Q \to P$. Alternatively, construct a natural isomorphism between the functors $\mor_{\mathcal{C}}( - , P)$ and $\mor_{\mathcal{C}}( -,Q)$.
\ep

\bs
\es

\bx
Define the opposite $F^\op \cl \mathcal{I}^\op \to \mathcal{C}^\op$ of a diagram $F \cl\mathcal{I} \to\mathcal{C}$. Compare the limit and colimit of $F^\op$ to the limit and colimit of $F$.
\ex

\bs
\es

\bx
Show that the colimit of the empty diagram $\vn \to \mathcal{C}$ is an initial object in $\mathcal{C}$. Show that the limit of the identity $\id_\mathcal{C}$ is an initial object in $\mathcal{C}$.
\ex

\bs
\es

\bx
Suppose $\mathcal{I}$ has an initial object, $\vn$, and let $F \cl \mathcal{I} \to \mathcal{C}$. Show that $F$ has a limit. State and prove the dual result.
\ex

\bs
\es

\bx
What is the colimit of a diagram whose shape is discrete?
\ex

\bs
\es

\section{Naturality of Limits and Colimits}

\bp
Explain how a natural transformation of diagrams induces a map between the limits of those diagrams.
\ep

\bs
\es

\bp
Let $\mathcal{C}$ be a category in which every diagram with shape $\mathcal{I}$ has a colimit. For each $F \in \mathcal{C}^{\mathcal{I}}$, choose, once and for all, a colimit for $F$, and call it $\colim F$.\footnote{We consider the object $\colim F$ as coming with structure maps to the diagram $F$.}
\ben[label=(\alph*)]
\item Show that the assignment $F\to \colim F$ defines a functor $\mathcal{C}^{\mathcal{I}} \to \mathcal{C}$.
\item Show that the functors $\mathcal{C}^{\mathcal{I}} \to \mathcal{C}$ and $\mathcal{C} \to \mathcal{C}^{\mathcal{I}}$ given by \bse
F\longmapsto \colim F \qquad \text{ and } \qquad X \longmapsto \Delta_X
\ese
are adjoint to one another. Which is the right adjoint and which is the left adjoint?
\een
\ep

\bs
\ben[label=(\alph*)]
\item 
\item 
\een
\es

\addtocounter{exercise}{1}

\bx
Formulate the dual of Theorem 2.17. Do you need to prove it? Explain.
\ex

\bs
\es

\addtocounter{exercise}{1}
\bp
Prove Theorem 2.19: Let $L \cl \mathcal{C} \to \mathcal{D}$ and $R \cl \mathcal{D} \to \mathcal{C}$ be an adjoint pair of functors.
\ben[label=(\alph*)]
\item Suppose that every diagram in $\mathcal{C}^{\mathcal{I}}$ has a colimit. Then for every $F \in \mathcal{C}^{\mathcal{I}}$, $L(\colim F)$ is a colimit for $L \circ F \in \mathcal{D}^{\mathcal{I}}$.
\item Suppose that every diagram in $\mathcal{D}^{\mathcal{I}}$ has a limit. Then for every $F \in \mathcal{D}^{\mathcal{I}}$, $R(\lim F)$ is a limit for $R \circ F \in \mathcal{C}^{\mathcal{I}}$.
\een
\ep

\bs
\ben[label=(\alph*)]
\item 
\item 
\een
\es

\section{Special Kinds of Limits and Colimits}

\bp
Suppose that
\bse
\begin{tikzcd}[column sep=large,row sep=large]
P \ar[d,"i"']\ar[r,"p"] & X\ar[d,"j"]\\
Z\ar[r,"z"]&Y\end{tikzcd}
\ese
is a pullback square. Show that if $j$ is an equivalence, then so is $i$.

{\scshape Hint}. Use the map $j^{-1}\circ z$ to find a map $K\cl Z\to P$.
\ep

\bs
Consider the diagram
\bse
\begin{tikzcd}%[column sep=large,row sep=large]
Z\ar[dr,dashed,"K"]\ar[rrrd,bend left=30,"j^{-1}\circ z"] \ar[dddr,bend right=30,"\id_Z"'] &&\\
&P \ar[dd,"i"']\ar[rr,"p"] && X\ar[dd,"j"]\\
&&&\\
&Z\ar[rr,"z"]&&Y\end{tikzcd}
\ese
and note that, since $j\circ(j^{-1}\circ z)=z\circ \id_Z$, there exists a unique $K\cl Z\to P$ such that the two triangles commute, i.e. $p\circ K=j^{-1}\circ z$ and $i\circ K=\id_Z$. Now consider the diagram
\bse
\begin{tikzcd}%[column sep=large,row sep=large]
P\ar[dr,dashed]\ar[rrrd,bend left=30,"p"] \ar[dddr,bend right=30,"i"'] &&\\
&P \ar[dd,"i"']\ar[rr,"p"] && X\ar[dd,"j"]\\
&&&\\
&Z\ar[rr,"z"]&&Y\end{tikzcd}
\ese
The outer square commutes since it is the same as the inner square. Hence there is a unique morphism $P\to P$ making the two triangles commute. We obviously have $p\circ \id_P=p$ and $i\circ \id_P=i$, but also
\bse
p\circ(K\circ i)=(p\circ K)\circ i=j^{-1}\circ z \circ i=j^{-1}\circ j \circ p=p
\ese
and $i\circ(K\circ i)=(i\circ K)\circ i=i$. Thus $K\circ i=\id_P$.
\es

\bx
Suppose that $\mathcal{C}$ has a terminal object $\tau$. Show that products of $X$ and $Y$ are the same as pullbacks for the diagram $X\to \tau \leftarrow Y$.
\ex

\bs
\begin{itemize}
\item[$(\Rightarrow)$]
This is done in Problem 1.45 (a).
\item[$(\Leftarrow)$]
Let $(Z,p,q)$ be a pullback of the diagram $X\to\tau\leftarrow Y$. Consider arbitrary morphisms $f\cl W\to X$ and $g\cl W\to Y$. Since $\tau$ is terminal, there is a unique morphism $W\to \tau$. Therefore, the two composites $W\xrightarrow{\,f\,}X\to \tau$ and $W\xrightarrow{\,g\,}Y\to \tau$ are equal. By the universal property of pullbacks, there is a unique morphism $W\to Z$ making the diagram 
\bse
\begin{tikzcd}
W \ar[dddr,bend right=30,"g"]\ar[drrr,bend left=30,"f"]\ar[dr,dashed]&&&\\
& Z \ar[rr,"p"]\ar[dd,"q"]&& X\ar[dd]\\
&&&\\
&Y \ar[rr]&& \tau
\end{tikzcd}
\ese
commute. Thus, $(Z,p,q)$ is a product of $X$ and $Y$. 
\end{itemize}
\es

\bp
Show that in the category of sets and functions
\bse
\begin{tikzcd}[row sep=large,column sep=huge]
\ar[d,"\pr_B"']\{(a, b) \mid f(a) = g(b)\} \ar[r,"\pr_A"] & A\ar[d,"f"]\\
B\ar[r,"g"] & C
\end{tikzcd}
\ese
is a pullback square. What is the pullback of $A \to * \leftarrow B$?
\ep

\bs
\es

\bx
\ben[label=(\alph*)]
\item Consider the category whose objects are the integers $1, 2, 3, \ldots$ and with arrows given by divisibility. Give number-theoretical descriptions of pullbacks in this category.
\item Repeat (a) but using the category whose objects are real numbers and whose morphisms correspond to inequalities $x \leq y$.
\een
\ex

\bs
\ben[label=(\alph*)]
\item 
\item 
\een
\es

\bx
Determine the pullback of the diagram
\bse
\begin{tikzcd}
\{1\}\ar[r] & B & \ar[l,"f"'] A
\end{tikzcd}
\ese
in the category of groups and homomorphisms.
\ex

\bs
Consider the subgroup $\ker (f)$ of $A$ and let $i\cl \ker (f)\hookrightarrow A$ be the inclusion. Then, denoting all identities as $1$, we have $f(i(a))=1$ for all $a\in \ker(f)$. So the inner square commutes. (Note that the homomorphisms into and out of $\{1\}$ are all uniquely determined as $\{1\}$ is a zero object.)
\bse
\begin{tikzcd}
Q \ar[rrrd,bend left=30,"h"] \ar[dddr,bend right=30] \ar[dr,shift left,"j"]\ar[dr,shift right,"j'"']&&&\\
& \ker (f) \ar[rr,hook,"i"]\ar[dd] && A\ar[dd,"f"]\\
&&&\\
& \{1\} \ar[rr] && B.
\end{tikzcd}
\ese
Let $h\cl Q\to A$ be such that the outer diagram commutes, i.e.\ $f(h(q))=1$ for all $q\in Q$. Then $h(q)\in\ker(f)$ for all $q\in Q$, so $h$ factors through the inclusion of the kernel, i.e.\ $h=ij$, with $j\cl Q\to \ker (f)$. 

Finally, suppose that $j'\cl Q\to \ker(f)$ is another homomorphism making the triangles commute. Then
\bse
j'(q)=i(j'(q))=h(q)=i(j(q))=j(q)
\ese
for all $q\in Q$, so $j=j'$. Thus $\ker(f)$ is the pullback of $\{1\}\to B \xleftarrow{\ f}A$.
\es

\bx
\ben[label=(\alph*)]
\item What is the shape category for the equalizer?
\item If products exist in our category, then we can form the diagram
\bse
\begin{tikzcd}[row sep=large,column sep=huge]
Q\ar[r]\ar[d,"q"'] & Y\ar[d,"\Delta"]\\
X\ar[r,"{(f,g)}"] & Y\times Y.
\end{tikzcd}
\ese
Show that this is a pullback square if, and only if, $Q$ (with given map $q \cl Q \to X$) is an equalizer for $f$ and $g$.
\item Show that if pullbacks always exist in $\mathcal{C}$, then so do equalizers. Is the converse true?
\een
\ex

\bs
\ben[label=(\alph*)]
\item 
\item 
\item 
\een
\es

\bp
State and prove the dual of Problem 2.21.
\ep

\bs
Suppose that
\bse
\begin{tikzcd}[row sep=large,column sep=large]
A \ar[r,"i"] \ar[d,"f"]& B\ar[d,"g"]\\
C \ar[r,"j"] & D
\end{tikzcd}
\ese
is a pushout square. Then, if $f$ is an equivalence, so is $g$. Indeed, we have a diagram
\bse
\begin{tikzcd}%[row sep=large,column sep=large]
A \ar[rr,"i"] \ar[dd,"f"]&& B\ar[dd,"g"]\ar[dddr,bend left=30,"\id_B"]&\\
&&&\\
C \ar[rrrd,bend right=30,"i\circ f^{-1}"']\ar[rr,"j"] && D\ar[dr,dashed,"k"]&\\
&&&B
\end{tikzcd}
\ese
Since $(i\circ f^{-1})\circ f=i=\id_B\circ i$, by the universal property of pushouts, there is a unique morphism $k\cl D\to B$ such that $k\circ g=\id_B$ and $k\circ j=i\circ f^{-1}$. Now consider
\bse
\begin{tikzcd}%[row sep=large,column sep=large]
A \ar[rr,"i"] \ar[dd,"f"]&& B\ar[dd,"g"]\ar[dddr,bend left=30,"g"]&\\
&&&\\
C \ar[rrrd,bend right=30,"j"']\ar[rr,"j"] && D\ar[dr,dashed]&\\
&&&D
\end{tikzcd}
\ese
The outer square commutes (as it is the same as the inner square) and hence there exists a unique morphism $D\to D$ making the two triangles commute. We obviously have $\id_D\circ g= g$ and $\id_D\circ j= j$, but also
\bse
(g\circ k)\circ j=g\circ (k\circ j)=g\circ i\circ f^{-1}=j\circ f\circ f^{-1}=j
\ese
and $(g\circ k)\circ g=g\circ(k\circ g)=g\circ \id_B=g$, so $g\circ k=\id_D$.  
\es

\bx
Work in the category $\mathbf{Sets}$ of all sets and all functions between sets. Suppose that $A \subseteq B$ and $A\subseteq C$ and that $i \cl A \to C$ and $p \cl A \to B$ are inclusion functions.
\ben[label=(\alph*)]
\item Determine the pushout of the diagram $B\xleftarrow{\ p} A\xrightarrow{i\ } C$.
\item Let $*$ denote a one-point set. Determine the pushout of $B\xleftarrow{\ p} A\xrightarrow{*\ }*$.
\een
\ex

\bs
\es

\bp
Let $X$ be a topological space, and suppose $X = A \cup B$, where $A,B \subseteq X$ are closed subspaces. Show that the diagram
\bse
\begin{tikzcd}[row sep=large,column sep=large]
A \cap B \ar[r]\ar[d] & A\ar[d]\\
B\ar[r]& X
\end{tikzcd}
\ese
is a pushout square.
\ep

\bs
\es

\bx
Suppose $\mathcal{C}$ has an initial object $\iota$, and let $X, Y \in \mathcal{C}$. Show that pushouts of diagrams of the form $X \leftarrow \iota \to Y$ are the same as coproducts $X \sqcup Y$.
\ex

\bs
\begin{itemize}
\item[$(\Rightarrow)$]
This is done in Problem 1.45 (b).
\item[$(\Leftarrow)$]
Let $(Z,i,j)$ be a pushout of the diagram $X \leftarrow \iota \to Y$. Consider arbitrary morphisms $f\cl X\to W$ and $g\cl Y\to W$. Since $\iota$ is initial, there is a unique morphism $\iota\to W$. Therefore, the two composites $\iota \to X\xrightarrow{\,f\,}W$ and $\iota \to Y\xrightarrow{\,g\,}W$ are equal. By the universal property of pushouts, there is a unique morphism $Z\to W$ making the diagram 
\bse
\begin{tikzcd}%[row sep=large,column sep=large]
\iota \ar[rr] \ar[dd]&& X\ar[dd,"i"]\ar[dddr,bend left=30,"f"]&\\
&&&\\
Y \ar[rrrd,bend right=30,"g"']\ar[rr,"j"] && Z\ar[dr,dashed]&\\
&&&W
\end{tikzcd}
\ese
commute. Thus, $(Z,i,j)$ is a coproduct of $X$ and $Y$. 
\end{itemize}
\es

\bx
\ben[label=(\alph*)]
\item Consider the category whose objects are the integers $1, 2, 3, \ldots$ and with arrows given by divisibility. Give number-theoretical descriptions of pushouts in this category.
\item Repeat (a) but using the category whose objects are real numbers and whose morphisms correspond to inequalities $x \leq y$.
\een
\ex

\bs
\ben[label=(\alph*)]
\item 
\item 
\een
\es

\bx
Determine the pushout of the diagram $A\xleftarrow{\ f} B\to\{1\}$ in the category of groups and homomorphisms. Compare with Exercise 2.25; what should the object you constructed here be called?
\ex

\bs
Given a subgroup $S$ of a group $G$, denote by $N(S)$ the \emph{normal closure} of $S$ in $G$, i.e.\ the intersection of all normal subgroups of $G$ which contain $S$. So $N(S)$ is the smallest normal subgroup of $G$ which contains $S$. Explicitly,
\bse
N(S)=\{g^{-1}sg \mid g \in G \text{ and } s \in S\}.
\ese
Consider the subgroup $\im (f)$ of $B$, take the quotient $B/N(\im(f))$ and let $q\cl B \to B/N(\im(f))$ be the quotient homomorphism. Then, for all $a\in A$, we have $f(a)\in \im(f)$, so $q(f(a))=N(\im(f))$ and thus, the inner square commutes. (Note that the homomorphisms into and out of $\{1\}$ are all uniquely determined as $\{1\}$ is a zero object.)
\bse
\begin{tikzcd}%[row sep=large,column sep=large]
A \ar[rr,"f"] \ar[dd]&& B\ar[dd,"q"]\ar[dddr,bend left=30,"h"]&\\
&&&\\
\{1\} \ar[rrrd,bend right=30]\ar[rr] && {\displaystyle \frac{B}{N(\im(f))} } \ar[dr,shift left,"j"]\ar[dr,shift right,"j'"']&\\
&&&Z
\end{tikzcd}
\ese
Let $h\cl B\to Z$ be such that the outer diagram commutes, i.e., denoting all identities as $1$, $h(f(a))=1$ for all $a\in A$. Then $h(b)=1$ for all $b\in \im(f)$. Moreover, if $b\notin \im(f)$ but $b\in N(\im(f))$, then $b=g^{-1}b_0 g$ for some $g\in B$ and $b_0\in \im(f)$. Therefore
\bse
h(b)=h(g^{-1}b_0 g)=h(g^{-1})h(b_0)h( g)=h(g)^{-1}h(g)=1,
\ese
so $h$ factors through $q$ as $h=jq$, with $j\cl B/N(\im(f))\to Z$ defined by
\bse
j(bN(\im(f)))=h(b).
\ese

Finally, suppose that $j'\cl B/N(\im(f))\to Z$ is another homomorphism making the triangles commute. Then
\bse
j'(bN(\im(f)))=j'(q(b))=h(b)=j(bN(\im(f)))
\ese
for all $b\in B$, so $j=j'$. Thus $B/N(\im(f))$ is the pushout of $A\xleftarrow{\ f} B\to\{1\}$. 

The object $B/N(\im(f))$ is called the \emph{cokernel} of $f\cl A\to B$, and is denoted by $\coker(f)$, as it satisfies the dual of the universal property defining $\ker(f)$. In $\mathbf{AbGrp}$, we have $\coker(f)=B/\im(f)$ for any $f\cl A\to B$, as every subgroup of an abelian group is normal (so $N(\im(f))=\im(f)$).
\es

\bp
Define the dual notion of \textbf{coequalizer}, and compare coequalizers with pushouts.
\ep

\bs
\es

\section{Formal Properties of Pushout and Pullback Squares}

\bp
Consider the diagram
\bse
\begin{tikzcd}[row sep=large,column sep=large]
A \ar[r,"i"] \ar[d,"f"]& B\ar[d,"g"]\\
C \ar[r,"j"] & D
\end{tikzcd}
\ese
\ben[label=(\alph*)]
\item Suppose the diagram is a pushout and that $f$ is an equivalence. Show that $g$ is also an equivalence.
\item Suppose $f$ and $g$ are both equivalences. Show that the square is a pushout.
\item State and prove the duals of (a) and (b).
\een
\ep

\bs
\ben[label=(\alph*)]
\item This is done in Problem 2.27.
\item {\scshape Note}. The statement in (b) is not true without also assuming that the square is commutative. Indeed, consider the following square in, say, $\mathbf{Sets}$.
\bse
\begin{tikzcd}[row sep=large,column sep=large]
\{a\} \ar[r] \ar[d]& \{b,c\}\ar[d]\\
\{d\} \ar[r] & \{e,f\}
\end{tikzcd}
\ese
The vertical arrows can be taken to be equivalences (bijections): there is a unique map $\{a\}\to\{d\}$ and we can define $\{b,c\}\to\{e,f\}$ by $b\mapsto e$, $c\mapsto f$. Then, choosing the horizontal maps to be $a\mapsto b$ and $d\mapsto f$ shows that the square need not be commutative.

Hence, let us assume that the square is commutative. Since $f$ is an equivalence, we have
\bse
j=j\circ \id_C=j\circ f\circ f^{-1}=g\circ i\circ f^{-1}.
\ese
Let $h\cl B\to Z$ and $k\cl C\to Z$ be morphisms such that $h\circ i=k\circ f$. Consider the morphism $h\circ g^{-1}\cl D\to Z$.
\bse
\begin{tikzcd}%[row sep=large,column sep=large]
A \ar[rr,"i"] \ar[dd,"f"]&& B\ar[dd,"g"]\ar[dddr,bend left=30,"h"]&\\
&&&\\
C \ar[rrrd,bend right=30,"k"']\ar[rr,"j"] && D\ar[dr,"h\circ g^{-1}"']&\\
&&&Z
\end{tikzcd}
\ese
We clearly have $(h\circ g^{-1})\circ g=h$ and
\bse
(h\circ g^{-1})\circ j=h\circ g^{-1}\circ (g\circ i\circ f^{-1})= h\circ i\circ f^{-1} =k \circ f \circ f^{-1}=k.
\ese
So $h\circ g^{-1}\cl D\to Z$ makes the two triangles in the diagram commute.

To see that it is the unique such, let $l\cl D\to Z$ be such that $l\circ j=k$ and $l\circ g=h$. Then
\bse
l=l\circ \id_D=l\circ (g\circ g^{-1})=(l\circ g)\circ g^{-1}=h\circ g^{-1}.
\ese
\item The dual of (a) is stated and proved in Problem 2.21. The dual of (b) reads: A commutative square
\bse
\begin{tikzcd}[row sep=large,column sep=large]
A \ar[r,"i"] \ar[d,"f"]& B\ar[d,"g"]\\
C \ar[r,"j"] & D
\end{tikzcd}
\ese
in which both $f$ and $g$ are equivalences, is a pullback square.

Indeed, let $h\cl X\to B$ and $k\cl X\to C$ be morphisms such that $g\circ h=j\circ k$. Consider the morphism $f^{-1}\circ k\cl X\to A$.
\bse
\begin{tikzcd}%[row sep=large,column sep=large]
X \ar[dr,"f^{-1}\circ k"] \ar[rrrd,bend left=30,"h"]\ar[dddr,bend right=30,"k"']&&&\\
&A \ar[rr,"i"] \ar[dd,"f"]&& B\ar[dd,"g"]\\
&&&\\
&C \ar[rr,"j"] && D
\end{tikzcd}
\ese
We clearly have $f\circ (f^{-1}\circ k)$ and, noting that $i=g^{-1}\circ j\circ f$,
\bse
i\circ(f^{-1}\circ k)=(g^{-1}\circ j\circ f)\circ(f^{-1}\circ k)= g^{-1}\circ j\circ k =g^{-1}\circ g\circ h=h.
\ese
For uniqueness, let $l\cl X\to A$ be such that $f\circ l=k$ and $i\circ l=h$. Then
\bse
l=\id_A\circ l=(f^{-1}\circ f) \circ l=f^{-1}\circ (f \circ l)=f^{-1}\circ k.
\ese
\een
\es

\bp
Prove Theorem 2.40: Consider the diagram
\bse
\begin{tikzcd}[row sep=small]
A_1 \ar[rr,"f_1"] \ar[dd,"h_1"]&& A_2 \ar[dd,"h_2"]\ar[rr,"f_2"]&& A_3\ar[dd,"h_3"]\\
 &(I)& &(II)&\\
B_1 \ar[rr,"g_1"]&& B_2\ar[rr,"g_2"] && B_3
\end{tikzcd}
\ese
and denote the outside square by $(T)$.
\ben[label=(\alph*)]
\item If $(I)$ and $(II)$ are pushouts, then $(T)$ is also a pushout.
\item If $(I)$ and $(T)$ are pushouts, then $(II)$ is also a pushout.
\een
\ep

\bs
\ben[label=(\alph*)]
\item Since $(I)$ and $(II)$ are pushouts, they are commutative squares. We have
\bse
h_3\circ (f_2\circ f_1) =(g_2\circ h_2)\circ f_1=g_2\circ (g_1\circ h_1)
\ese
and hence $(T)$ is also a commutative square. Let $f\cl A_3\to C$ and $g\cl B_1\to C$ be morphisms such that $f\circ(f_2\circ f_1)=g\circ h_1$.
\bse
\begin{tikzcd}[row sep=small]
A_1 \ar[rr,"f_1"] \ar[dd,"h_1"]&& A_2 \ar[dd,"h_2"]\ar[rr,"f_2"]&& A_3\ar[dd,"h_3"] \ar[rddd,bend left=30,"f"]&\\
 &(I)& &(II)&&\\
B_1 \ar[rrrrrd,bend right=25,"g"]\ar[rr,"g_1"]&& B_2\ar[drrr,bend right=10,dashed,"h"]\ar[rr,"g_2"] && B_3\ar[dr,dashed,"k"]&\\
&&&&& C
\end{tikzcd}
\ese
Since $(f\circ f_2)\circ f_1=g\circ h_1$, by the pushout property of $(I)$, there exists a unique $h\cl B_2\to C$ such that $h\circ g_1=g$ and $h\circ h_2=f\circ f_2$. The latter implies that there exists a unique $k\cl B_3\to C$ such that $k\circ g_2 = h$ and $k\circ h_3=f$ by the pushout property of $(II)$. Then $k\circ(g_2\circ g_1)=h\circ g_1=g$.

For uniqueness, let $k'\cl B_3\to C$ is such that $k'\circ h_3=f$ and $k'\circ (g_2\circ g_1)=g$. Consider the composite $k'\circ g_2\cl B_2\to C$. We have $(k'\circ g_2)\circ g_1=g$ and 
\bse
(k'\circ g_2)\circ h_2=k'\circ (h_3\circ f_2)=f\circ f_2,
\ese
but $h\cl B_2\to C$ is the unique morphism satisfying these equations and hence $k'\circ g_2 =h$. Since we also have $k'\circ h_3=f$ and $k$ is the unique morphism satisfying these equations, we must have $k=k'$. 
\item {\scshape Note}. The statement in (b) is not true without assuming that $(I)$ and $(II)$ are both commutative. Indeed, the commutativity of $(I)$ and $(T)$ does not imply that of $(II)$, as is shown, for instance, by the following diagram in $\mathbf{Sets}$. 
\bse
\begin{tikzcd}[row sep=large,column sep=large]
\{a\}\ar[r,"a\,\mapsto\,b"]\ar[d] & \{b,c\} \ar[d] \ar[r,"b\,\mapsto\, d","c\,\mapsto\, e"'] & \{d,e\} \ar[d,"e\,\mapsto\,i","d\,\mapsto\, h"']\\
\{f\} \ar[r] & \{g\} \ar[r,"g\,\mapsto \, h"] & \{h,i\}
\end{tikzcd}
\ese

Hence, assuming that $(I)$ and $(II)$ are both commutative, let $f\cl A_3\to C$ and $g\cl B_2\to C$ be morphisms such that $f\circ f_2=g\circ h_2$.
\bse
\begin{tikzcd}[row sep=small]
A_1 \ar[rr,"f_1"] \ar[dd,"h_1"]&& A_2 \ar[dd,"h_2"]\ar[rr,"f_2"]&& A_3\ar[dd,"h_3"] \ar[rddd,bend left=30,"f"]&\\
 &(I)& &(II)&&\\
B_1 \ar[rrrrrd,bend right=25,"g\circ g_1"']\ar[rr,"g_1"]&& B_2\ar[drrr,bend right=22,"g"'] \ar[drrr,dashed,bend right=5,"u"] \ar[rr,"g_2"] && B_3\ar[dr,dashed,"k"]&\\
&&&&& C
\end{tikzcd}
\ese
Since 
\bse
f\circ (f_2\circ f_1)=(g\circ h_2)\circ f_1=(g\circ g_1)\circ h_1,
\ese
by the pushout property of $(T)$, there is a unique morphism $k\cl B_3\to C$ such that $k\circ h_3=f$ and $k\circ(g_2\circ g_1)=g \circ g_1$.

Now consider the composites $g\circ h_2$ and $g\circ g_1$. By the commutativity of $(I)$, we have $(g\circ h_2)\circ f_1=(g\circ g_1)\circ h_1$. Hence, by the pushout property of $(I)$, there is a unique $u\cl B_2\to C$ such that
\bse
u\circ h_2=g\circ h_2 \qquad \text{ and }\qquad u\circ g_1=g\circ g_1.
\ese
Obviously, $g$ satisfies these equations, but we also have
\bse
(k\circ g_2)\circ g_1=k\circ(g_2\circ g_1)=g\circ g_1
\ese
and
\bse
(k\circ g_2)\circ h_2=k\circ(h_3\circ f_2)=f\circ f_2=g\circ h_2.
\ese
Therefore $k\circ g_2=u=g$. 

For uniqueness, let $k'\cl B_3\to C$ be such that $k'\circ h_3=f$ and $k'\circ g_2=g$. Then
\bse
k'\circ(g_2\circ g_1)=(k'\circ g_2)\circ g_1=g\circ g_1
\ese
and $k'\circ h_3=f$, but, by the pushout property of $(T)$, $k$ is the unique morphism satisfying these equations. Thus $k'=k$.
\een
\es


































